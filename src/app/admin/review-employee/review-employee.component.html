<!-- Employee Form -->
<form
  id="regForm"
  [formGroup]="approval"
  [@myAnimation]
  class="container"
  [style.display]="isLoading ? 'none' : 'block'"
>
  <!-- Personal Information Step -->
  <mat-horizontal-stepper #stepper>
    <mat-step
      formGroupName="personalInformation"
      [stepControl]="approval.get('personalInformation')"
    >
      <ng-template matStepLabel>Personal</ng-template>
      <h2 class="mat-display-1" style="margin-bottom: 32px">
        Personal Information
      </h2>
      <p *ngIf="requestNumber">
        Your request number: <span style="color: red">{{ requestNumber }}</span>
      </p>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>First Name</mat-label>
          <input
            id="firstNameInput"
            #firstNameInput
            type="text"
            matInput
            formControlName="firstName"
            required
            pattern="[a-zA-Z ]*"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>First name is required and must be letters only</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Middle Initial</mat-label>
          <input
            id="middleInitialInput"
            type="text"
            matInput
            formControlName="middleInitial"
            pattern="[a-zA-Z ]"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-error>Middle initial must be letters only</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Last Name</mat-label>
          <input
            id="lastNameInput"
            type="text"
            matInput
            formControlName="lastName"
            required
            pattern="[a-zA-Z ]*"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>Last name is required and must be letters only</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Email</mat-label>
          <input
            id="emailAddress"
            type="text"
            matInput
            formControlName="emailAddress"
            required
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>Email is required with correct email format</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>County Department Name/Organization Name</mat-label>
          <input
            id="countyDepartmentName"
            type="text"
            matInput
            formControlName="countyDepartmentName"
            required
            pattern="[a-zA-Z ]*"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>County Department Name is Required</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label> County Department number</mat-label>
          <input
            id="countyDepartmentNumber"
            type="phone"
            matInput
            formControlName="countyDepartmentNumber"
            required
            pattern="[0-9]*"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>County Department Number is is Required</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label> Cell Phone number</mat-label>
          <input
            id="phoneNumberInput"
            type="phone"
            matInput
            required
            formControlName="phoneNumber"
            pattern="[0-9]{10}"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>Phone number is required and must be 10 digit</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label> Work Phone number</mat-label>
          <input
            id="workPhoneNumberInput"
            type="phone"
            matInput
            formControlName="workPhoneNumber"
            pattern="[0-9]{10}"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Leave empty if same as Cell Phone number</mat-hint>
          <mat-error>Phone number is required and must be 10 digit</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" style="width: 70%">
          <mat-label>Employee or Contractor Number</mat-label>
          <input
            id="employeeNumberInput"
            type="text"
            matInput
            formControlName="employeeNumber"
            required
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>Employee or Contractor number is required</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Contractor Company Name</mat-label>
          <input
            id="contractorName"
            type="text"
            matInput
            formControlName="contractorName"
            pattern="[a-zA-Z ]*"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>County Department Name is Required</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" style="width: 70%">
          <mat-label>Contract Work Order Number</mat-label>
          <input
            id="workOrderNumberInput"
            type="text"
            matInput
            formControlName="workOrderNumberInput"
            [errorStateMatcher]="errorStateMatcher"
          />
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" style="width: 70%">
          <mat-label>Contract Expiration Date</mat-label>
          <input
            id="expirationDate"
            type="date"
            matInput
            formControlName="expirationDate"
            [errorStateMatcher]="errorStateMatcher"
          />
        </mat-form-field>
      </div>
      <div class="button-container">
        <button mat-raised-button matStepperNext color="primary">Next</button>
        <span class="spacer"></span>
        <button
          id="personal-info-save-btn"
          mat-raised-button
          class="save-button"
          color="accent"
          (click)="save()"
        >
          Save
        </button>
      </div>
    </mat-step>

    <!-- Address Step -->
    <mat-step
      formGroupName="addressInformation"
      [stepControl]="approval.get('addressInformation')"
    >
      <ng-template matStepLabel>Address</ng-template>
      <h2 class="mat-display-1" style="margin-bottom: 32px">Address</h2>
      <p *ngIf="requestNumber">
        Your request number: <span style="color: red">{{ requestNumber }}</span>
      </p>

      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Street Address</mat-label>
          <input
            id="addressInput"
            type="text"
            matInput
            formControlName="address"
            required
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>Street address is required</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>City</mat-label>
          <input
            id="cityInput"
            type="text"
            matInput
            formControlName="city"
            required
            pattern="[a-zA-Z ]*"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>City is required and must be letters only</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>State</mat-label>
          <input
            id="stateInput"
            type="text"
            matInput
            formControlName="state"
            required
            pattern="[a-zA-Z ]*"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error>State is required and must be letters only</mat-error>
        </mat-form-field>
      </div>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Zip Code</mat-label>
          <input
            id="zipCodeInput"
            type="text"
            matInput
            formControlName="zipCode"
            required
            pattern="[0-9]*"
            [errorStateMatcher]="errorStateMatcher"
          />
          <mat-hint>Required</mat-hint>
          <mat-error
            >Zipcode is required and must be numbers only with length
            5-7</mat-error
          >
        </mat-form-field>
      </div>
      <div class="button-container">
        <button mat-raised-button matStepperPrevious>Previous</button>
        <button mat-raised-button matStepperNext color="primary" class="ml-2">
          Next
        </button>
        <span class="spacer"></span>
        <button
          id="address-info-save-btn"
          mat-raised-button
          class="save-button"
          color="accent"
          (click)="save()"
        >
          Save
        </button>
      </div>
    </mat-step>

    <!--Internet Access-->
    <mat-step
      formGroupName="addressInformation"
      [stepControl]="approval.get('addressInformation')"
    >
      <ng-template matStepLabel>Internet Access</ng-template>
      <h2 class="mat-display-1" style="margin-bottom: 32px">Internet Access</h2>
      <!-- Information -->
      <div>
        <br />
        <h5><u>Policy Rules Descriptions:</u></h5>
        <p>
          <small
            ><b>Countywide Policy A:</b> Allow access to all categories -except
            bad Categories<br />
            <b>Countywide Policy B:(default)</b>No access to sites/domains that
            are categorized as Adult Content, Gaming, Dating + additional
            categories such as Hacking, Proxy Avoidance, Remote Access Tools,
            and Bad Categories<br />
            <br />
          </small>
        </p>
      </div>

      <!-- First Row -->
      <div class="flex-container">
        <!-- For some reason need to also apply to parent in order for this style to work, access-option-button -->
        <div class="flex-column access-option-button">
          <mat-button-toggle
            id="countyWidePolicyA"
            class="access-option-button"
            [checked]="countyWidePolicyA"
            (change)="onButtonChange($event, 'Countywide Policy A')"
            >Countywide Policy A
          </mat-button-toggle>
        </div>
        <div class="flex-column access-option-button">
          <mat-button-toggle
            id="countyWidePolicyB"
            class="access-option-button"
            [checked]="countyWidePolicyB"
            (change)="onButtonChange($event, 'Countywide Policy B')"
            >Countywide Policy B</mat-button-toggle
          >
        </div>
      </div>
      <div>
        <br />
        <p>
          <small>
            <span style="color: red">Please Note: </span>
            <span>
              <ul>
                <li>
                  Bad Categories (Malicious, Outbound Data/Botnets, Malicious
                  Sources/Malnets,Phishing, and Spam) are Blocked regardless of
                  Policy Rule level - exemptions can be made with proper
                  DISO/CISO approval
                </li>
                <li>
                  Access to Personal Webmail Such as Yahoo, Gmail, AOL, ect., is
                  BLOCKED countywide - exemptions can be made with selection and
                  justification indicated below
                </li>
              </ul>
            </span>
          </small>
        </p>
      </div>
      <!-- Second row -->
      <div class="flex-container">
        <div class="flex-column access-option-button">
          <mat-button-toggle
            id="allWebmail"
            class="access-option-button"
            [checked]="allWebmail"
            (change)="onButtonChange($event, 'ALL Webmail')"
            >All Webmail</mat-button-toggle
          >
        </div>
        <div class="flex-column access-option-button">
          <mat-button-toggle
            id="streamMedia"
            class="access-option-button"
            [checked]="streamMedia"
            (change)="onButtonChange($event, 'Stream Media')"
            >Stream Media</mat-button-toggle
          >
        </div>
      </div>
      <!--Third Row-->
      <div class="flex-container">
        <div class="flex-column">
          <mat-form-field>
            <mat-label>*Business justification: </mat-label>
            <input id="justification" matInput />
          </mat-form-field>
        </div>
      </div>
      <div class="internet-access-button-container">
        <button mat-raised-button matStepperPrevious>Previous</button>
        <button mat-raised-button matStepperNext color="primary" class="ml-2">
          Next
        </button>
        <span class="spacer"></span>
        <button
          id="access-info-save-btn"
          mat-raised-button
          class="save-button"
          color="accent"
          (click)="save()"
        >
          Save
        </button>
      </div>
    </mat-step>

    <!-- Access Information Step-->
    <mat-step>
      <ng-template matStepLabel>Data Center Access</ng-template>
      <!-- TODO: Work on naming and values -->
      <div>
        <h2 class="mat-display-1" style="margin-bottom: 16px">
          Access Options
        </h2>
        <p *ngIf="requestNumber">
          Your request number:
          <span style="color: red">{{ requestNumber }}</span>
        </p>

        <div class="row">
          <!-- Access choices -->

          <!-- IBM Access info button -->
          <div class="access-option-button col-sm-12 col-md-4">
            <mat-button-toggle id="ibm-access-btn"
              >IBM Access Information
            </mat-button-toggle>
            <div class="ibmForm">
              <div>
                <!-- TODO: Add a heading here -->
                <mat-form-field formGroupName="accessInformation">
                  <mat-label>Logon ID</mat-label>
                  <input
                    id="ibmLogonIdInput"
                    matInput
                    formControlName="ibmLogonId"
                  />
                </mat-form-field>
              </div>
              <div>
                <mat-form-field formGroupName="accessInformation">
                  <mat-label>2-Digit Major Group Code</mat-label>
                  <input
                    id="ibmMajorGroupCodeInput"
                    matInput
                    formControlName="majorGroupCode"
                  />
                </mat-form-field>
              </div>
              <div>
                <mat-form-field formGroupName="accessInformation">
                  <mat-label>2-Digit LSO Group Code</mat-label>
                  <input
                    id="ibmLsoGroupCodeInput"
                    matInput
                    formControlName="lsoGroupCode"
                  />
                </mat-form-field>
              </div>
              <div>
                <mat-form-field formGroupName="accessInformation">
                  <mat-label>Security Authorization</mat-label>
                  <input
                    id="ibmSecurityAuthInput"
                    matInput
                    formControlName="securityAuthorization"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>

          <!-- Unix Environment button -->
          <div class="access-option-button col-sm-12 col-md-4">
            <mat-button-toggle id="unix-access-btn"
              >Unix Environment Access</mat-button-toggle
            >
            <div class="unix-access-form">
              <!-- TODO: Needs the Type of Request section -->
              <div>
                <mat-form-field formGroupName="accessInformation">
                  <mat-label>Login ID</mat-label>
                  <input
                    id="unixLogonIdInput"
                    matInput
                    formControlName="unixLogonId"
                  />
                </mat-form-field>
              </div>
              <div>
                <mat-form-field formGroupName="accessInformation">
                  <mat-label>Application</mat-label>
                  <input
                    id="applicationInput"
                    matInput
                    formControlName="application"
                  />
                </mat-form-field>
              </div>
              <div>
                <mat-form-field formGroupName="accessInformation">
                  <mat-label>Access Group</mat-label>
                  <input
                    id="accessGroupInput"
                    matInput
                    formControlName="accessGroup"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>

          <!-- SecurId button -->
          <div class="access-option-button col-sm-12 col-md-4">
            <mat-button-toggle id="securid-access-btn"
              >SecurID Remote Access</mat-button-toggle
            >
            <div class="secur-id-access-form">
              <div>
                <mat-form-field formGroupName="accessInformation">
                  <mat-label>Billing Account Number</mat-label>
                  <input
                    id="billingAccountInput"
                    matInput
                    formControlName="billingAccountNumber"
                  />
                </mat-form-field>
              </div>
              <div>
                <mat-form-field formGroupName="accessInformation">
                  <mat-label>Access Type</mat-label>
                  <select
                    formControlName="accessType"
                    id="accessTypeSelect"
                    matNativeControl
                  >
                    <option selected="SecurIDVPN">SecurID VPN</option>
                    <option value="Adapative Authentication VPN">
                      Adapative Authentication VPN
                    </option>
                  </select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
        <!-- Options -->
        <!-- The forms will render here after the user checks the corresponding checkbox-->
        <div class="accessInformationForms">
          <!-- SecurID Access form -->

          <div class="button-container">
            <button mat-raised-button matStepperPrevious>Previous</button>
            <button
              mat-raised-button
              matStepperNext
              color="primary"
              class="ml-2"
            >
              Next
            </button>
            <span class="spacer"></span>
            <button
              id="access-info-save-btn"
              mat-raised-button
              class="save-button"
              color="accent"
              (click)="save()"
            >
              Save
            </button>
          </div>
        </div>
      </div>
    </mat-step>

    <!-- Department -->
    <mat-step [stepControl]="approval.get('additionalInformation')">
      <ng-template matStepLabel>Active Directory</ng-template>
      <div>
        <h2 class="mat-display-1">Applications Requested</h2>
        <h3 class="mat-title">Select the following options</h3>
        <div class="flex-container">
          <!-- For some reason need to also apply to parent in order for this style to work, access-option-button -->
        </div>
        <div class="flex-container">
          <div class="flex-column active-directory-button">
            <mat-button-toggle
              id="laCountyGovAccess"
              class="active-directory-button"
              [checked]="laCountyGovAccess"
              (change)="onButtonChange($event, 'LA County Access')"
              >LACounty.gov Access</mat-button-toggle
            >
          </div>
          <div class="flex-column active-directory-button">
            <mat-button-toggle
              id="lacMobileWifiAccess"
              class="active-directory-button"
              [checked]="lacMobileWifiAccess"
              (change)="onButtonChange($event, 'LAC Mobile')"
              >LACMobile</mat-button-toggle
            >
          </div>
          <div class="flex-column access-option-button">
            <mat-button-toggle
              id="o365Email"
              class="access-option-button"
              [checked]="o365Email"
              (change)="onButtonChange($event, 'O365 E-mail')"
              >O365 E-mail</mat-button-toggle
            >
          </div>
        </div>
        <!-- This is a spacer to help align items properly -->
        <div class="flex-column"></div>
      </div>
      <!-- <button (click)="sampleFunction()">Test</button> -->
      <div class="active-directory-button-container">
        <button mat-raised-button matStepperPrevious>Previous</button>
        <button mat-raised-button matStepperNext color="primary" class="ml-2">
          Next
        </button>
        <span class="spacer"></span>
        <button
          id="access-info-save-btn"
          mat-raised-button
          class="save-button"
          color="accent"
          (click)="save()"
        >
          Save
        </button>
      </div>
    </mat-step>

    <!-- Manager -->
    <mat-step
      formGroupName="managerInformation"
      [stepControl]="approval.get('managerInformation')"
    >
      <ng-template matStepLabel>Manager</ng-template>
      <h2 class="mat-display-1" style="margin-bottom: 32px">
        Manager's Contact Information
      </h2>
      <div>
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Manager's First Name</mat-label>
          <input matInput formControlName="managerFirstName" />
        </mat-form-field>
        <br />
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Manager's Last Name</mat-label>
          <input matInput formControlName="managerLastName" />
        </mat-form-field>
        <br />
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Manager's Phone #</mat-label>
          <input matInput formControlName="managerPhone" />
        </mat-form-field>
        <br />
        <mat-form-field appearance="outline" class="mat-input-width">
          <mat-label>Manager's Email</mat-label>
          <input matInput formControlName="managerEmail" />
        </mat-form-field>
      </div>
      <div class="button-container">
        <button mat-raised-button matStepperPrevious>Previous</button>
        <button mat-raised-button matStepperNext color="primary" class="ml-2">
          Next
        </button>
        <span class="spacer"></span>
        <button
          id="employee-info-save-btn"
          mat-raised-button
          class="save-button"
          color="accent"
          (click)="save()"
        >
          Save
        </button>
      </div>
    </mat-step>

    <!-- Signatures-->
    <mat-step
      formGroupName="signatures"
      [stepControl]="approval.get('signatures')"
    >
      <ng-template matStepLabel>Approvers</ng-template>
      <div>
        <h2 class="mat-display-1">Signatures</h2>
        <h3 class="mat-title">Select the following for signatures</h3>
        <div class="dropdown-container">
          <div class="dropdown-divChief">
            <mat-form-field appearance="outline" class="mat-input-width">
              <mat-label>Division Chief Manager</mat-label>
              <mat-select formControlName="divChiefManagerName">
                <mat-option
                  [value]="null"
                  (click)="setSelectedValue('divisionChief', null)"
                  >None</mat-option
                >
                <mat-option
                  *ngFor="let food of divCheifList"
                  [value]="food.name"
                  (click)="setSelectedValue('divisionChief', food.id)"
                >
                  {{ food.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="dropdown-deptHead">
            <mat-form-field appearance="outline" class="mat-input-width">
              <mat-label>Department Head</mat-label>
              <mat-select formControlName="departmentHeadName">
                <mat-option
                  [value]="null"
                  (click)="setSelectedValue('departmentHead', null)"
                  >None</mat-option
                >
                <mat-option
                  *ngFor="let food of deptHeadList"
                  [value]="food.name"
                  (click)="setSelectedValue('departmentHead', food.id)"
                >
                  {{ food.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="dropdown-appCoord">
            <mat-form-field appearance="outline" class="mat-input-width">
              <mat-label>Application Coordinator</mat-label>
              <mat-select formControlName="applicationCoordinatorName">
                <mat-option
                  [value]="null"
                  (click)="setSelectedValue('appCoord', null)"
                  >None</mat-option
                >
                <mat-option
                  *ngFor="let food of appCoordList"
                  [value]="food.name"
                  (click)="setSelectedValue('appCoord', food.id)"
                >
                  {{ food.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="dropdown-deptInfo">
            <mat-form-field appearance="outline" class="mat-input-width">
              <mat-label>Dept. Info Sec. Officer</mat-label>
              <mat-select formControlName="deptInfoSecurityOfficerName">
                <mat-option
                  [value]="null"
                  (click)="setSelectedValue('deptInfo', null)"
                  >None</mat-option
                >
                <mat-option
                  *ngFor="let food of deptInfoList"
                  [value]="food.name"
                  (click)="setSelectedValue('deptInfo', food.id)"
                >
                  {{ food.name }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="button-container">
        <button mat-raised-button matStepperPrevious>Previous</button>
        <button mat-raised-button matStepperNext color="primary" class="ml-2">
          Next
        </button>
        <span class="spacer"></span>
        <button
          id="employee-info-save-btn"
          mat-raised-button
          class="save-button"
          color="accent"
          (click)="save()"
        >
          Save
        </button>
      </div>
    </mat-step>

    <!-- Submit -->
    <mat-step>
      <ng-template matStepLabel>Start Adobe Process</ng-template>
      <div>
        <h2 class="mat-display-1">Start Adobe Sign process</h2>
        <div class="button-container">
          <button mat-raised-button matStepperPrevious>Previous</button>
          <button mat-raised-button matStepperNext color="primary" class="ml-2">
            Next
          </button>
          <span class="spacer"></span>
          <button
            class="submit"
            id="employee-info-save-btn"
            mat-raised-button
            class="save-button"
            color="warn"
            (click)="startAdobeProcess()"
          >
            Submit
          </button>
        </div>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</form>

<!-- Loading page -->
<ng-container *ngIf="isLoading">
  <app-loading-page></app-loading-page>
</ng-container>
